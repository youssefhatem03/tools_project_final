{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'../../css/create-order.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Order(){const[orderData,setOrderData]=useState({pickupLocation:'',dropOffLocation:'',packageDetails:'',deliveryTime:''});const navigate=useNavigate();useEffect(()=>{const userId=localStorage.getItem('userId');const username=localStorage.getItem('username');const usereamil=localStorage.getItem('userEmail');if(!userId||!username||!usereamil){alert('Please log in first');navigate('/login');}else{const validateUser=async()=>{try{const response=await fetch('http://localhost:3000/validate-user',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId})});const data=await response.json();if(!data.valid){alert('User validation failed. Please log in again.');navigate('/login');}}catch(error){console.error('Validation error:',error);alert('An error occurred during validation. Please log in again.');navigate('/login');}};validateUser();}},[navigate]);const handleSubmit=async e=>{e.preventDefault();const userId=localStorage.getItem('userId');// Retrieve user ID from local storage\nconst orderDataWithUserId={...orderData,userId// Add userId to order data\n};try{const response=await fetch('http://localhost:3000/create-order',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(orderDataWithUserId)// Send updated order data\n});if(response.ok){alert('Order created successfully');navigate('/user-orders');}else{alert('Failed to create order');}}catch(error){console.error('Error:',error);alert('An error occurred. Please try again.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-inner order-inner\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Order\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pickup Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:orderData.pickupLocation,onChange:e=>setOrderData({...orderData,pickupLocation:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Drop-off Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:orderData.dropOffLocation,onChange:e=>setOrderData({...orderData,dropOffLocation:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Package Details\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:orderData.packageDetails,onChange:e=>setOrderData({...orderData,packageDetails:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Delivery Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",className:\"form-control\",value:orderData.deliveryTime,onChange:e=>setOrderData({...orderData,deliveryTime:e.target.value}),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",children:\"Create Order\"})]})]})});}export default Order;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Order","orderData","setOrderData","pickupLocation","dropOffLocation","packageDetails","deliveryTime","navigate","userId","localStorage","getItem","username","usereamil","alert","validateUser","response","fetch","method","headers","body","JSON","stringify","data","json","valid","error","console","handleSubmit","e","preventDefault","orderDataWithUserId","ok","className","children","onSubmit","type","value","onChange","target","required"],"sources":["C:/Users/Eslam/OneDrive/Desktop/last version/tools3_project/front-end/src/components/user/create-order.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../css/create-order.css'; \r\n\r\nfunction Order() {\r\n  const [orderData, setOrderData] = useState({\r\n    pickupLocation: '',\r\n    dropOffLocation: '',\r\n    packageDetails: '',\r\n    deliveryTime: '',\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    const username = localStorage.getItem('username');\r\n    const usereamil = localStorage.getItem('userEmail');\r\n  \r\n    if (!userId || !username || !usereamil) {\r\n      alert('Please log in first');\r\n      navigate('/login');\r\n    } else {\r\n      const validateUser = async () => {\r\n        try {\r\n          const response = await fetch('http://localhost:3000/validate-user', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ userId }),\r\n          });\r\n          const data = await response.json();\r\n          if (!data.valid) {\r\n            alert('User validation failed. Please log in again.');\r\n            navigate('/login');\r\n          }\r\n        } catch (error) {\r\n          console.error('Validation error:', error);\r\n          alert('An error occurred during validation. Please log in again.');\r\n          navigate('/login');\r\n        }\r\n      };\r\n      validateUser();\r\n    }\r\n  }, [navigate]);\r\n  \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const userId = localStorage.getItem('userId'); // Retrieve user ID from local storage\r\n    const orderDataWithUserId = {\r\n      ...orderData,\r\n      userId, // Add userId to order data\r\n    };\r\n  \r\n    try {\r\n      const response = await fetch('http://localhost:3000/create-order', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(orderDataWithUserId), // Send updated order data\r\n      });\r\n      if (response.ok) {\r\n        alert('Order created successfully');\r\n        navigate('/user-orders');\r\n      } else {\r\n        alert('Failed to create order');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('An error occurred. Please try again.');\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"auth-wrapper\">\r\n      <div className=\"auth-inner order-inner\">\r\n        <h2>Create Order</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label>Pickup Location</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={orderData.pickupLocation}\r\n              onChange={(e) => setOrderData({ ...orderData, pickupLocation: e.target.value })}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Drop-off Location</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={orderData.dropOffLocation}\r\n              onChange={(e) => setOrderData({ ...orderData, dropOffLocation: e.target.value })}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Package Details</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={orderData.packageDetails}\r\n              onChange={(e) => setOrderData({ ...orderData, packageDetails: e.target.value })}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Delivery Time</label>\r\n            <input\r\n              type=\"datetime-local\"\r\n              className=\"form-control\"\r\n              value={orderData.deliveryTime}\r\n              onChange={(e) => setOrderData({ ...orderData, deliveryTime: e.target.value })}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary btn-block\">Create Order</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Order;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}