{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'../../css/user-orders.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserOrders(){const[orders,setOrders]=useState([]);const navigate=useNavigate();useEffect(()=>{const userId=localStorage.getItem('userId');if(!userId){alert('Please log in first');navigate('/login');}else{const fetchUserOrders=async()=>{try{const response=await fetch(`http://localhost:3000/user-orders/${userId}`);if(response.ok){const data=await response.json();setOrders(data);}else{console.error('Failed to fetch orders');}}catch(error){console.error('Error fetching orders:',error);}};fetchUserOrders();}},[navigate]);const cancelOrder=async orderId=>{if(window.confirm('Are you sure you want to cancel this order?')){try{const response=await fetch(`http://localhost:3000/orders/${orderId}`,{method:'DELETE'});if(response.ok){alert('Order cancelled successfully');setOrders(orders.filter(order=>order.id!==orderId));}else{console.error('Failed to cancel order');}}catch(error){console.error('Error cancelling order:',error);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container user-orders-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center order\",children:\"Your Orders\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-create-order\",onClick:()=>navigate('/create-order'),children:\"Create Order\"}),orders.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"orders-container\",children:orders.map(order=>/*#__PURE__*/_jsx(\"div\",{className:\"card order-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Order Details\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pickup Location:\"}),\" \",order.pickup_location]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Drop-off Location:\"}),\" \",order.drop_off_location]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Package Details:\"}),\" \",order.package_details]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery Time:\"}),\" \",new Date(order.delivery_time).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",order.status]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger mt-3\",onClick:()=>cancelOrder(order.id),children:\"Cancel Order\"})]})},order.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No orders found.\"})]});}export default UserOrders;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","UserOrders","orders","setOrders","navigate","userId","localStorage","getItem","alert","fetchUserOrders","response","fetch","ok","data","json","console","error","cancelOrder","orderId","window","confirm","method","filter","order","id","className","children","onClick","length","map","pickup_location","drop_off_location","package_details","Date","delivery_time","toLocaleString","status"],"sources":["C:/Users/Eslam/OneDrive/Desktop/last version/tools3_project/front-end/src/components/user/user-orders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../css/user-orders.css';\r\n\r\nfunction UserOrders() {\r\n  const [orders, setOrders] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (!userId) {\r\n      alert('Please log in first');\r\n      navigate('/login');\r\n    } else {\r\n      const fetchUserOrders = async () => {\r\n        try {\r\n          const response = await fetch(`http://localhost:3000/user-orders/${userId}`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setOrders(data);\r\n          } else {\r\n            console.error('Failed to fetch orders');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching orders:', error);\r\n        }\r\n      };\r\n      fetchUserOrders();\r\n    }\r\n  }, [navigate]);\r\n\r\n  const cancelOrder = async (orderId) => {\r\n    if (window.confirm('Are you sure you want to cancel this order?')) {\r\n      try {\r\n        const response = await fetch(`http://localhost:3000/orders/${orderId}`, {\r\n          method: 'DELETE',\r\n        });\r\n        if (response.ok) {\r\n          alert('Order cancelled successfully');\r\n          setOrders(orders.filter((order) => order.id !== orderId));\r\n        } else {\r\n          console.error('Failed to cancel order');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error cancelling order:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container user-orders-container\">\r\n      <h2 className=\"text-center order\">Your Orders</h2>\r\n      <button\r\n        className=\"btn btn-create-order\"\r\n        onClick={() => navigate('/create-order')}\r\n      >\r\n        Create Order\r\n      </button>\r\n      {orders.length > 0 ? (\r\n        <div className=\"orders-container\">\r\n          {orders.map((order) => (\r\n            <div key={order.id} className=\"card order-card\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\"><strong>Order Details</strong></h5>\r\n                <p className=\"card-text\"><strong>Pickup Location:</strong> {order.pickup_location}</p>\r\n                <p className=\"card-text\"><strong>Drop-off Location:</strong> {order.drop_off_location}</p>\r\n                <p className=\"card-text\"><strong>Package Details:</strong> {order.package_details}</p>\r\n                <p className=\"card-text\"><strong>Delivery Time:</strong> {new Date(order.delivery_time).toLocaleString()}</p>\r\n                <p className=\"card-text\"><strong>Status:</strong> {order.status}</p>\r\n                <button\r\n                  className=\"btn btn-danger mt-3\"\r\n                  onClick={() => cancelOrder(order.id)}\r\n                >\r\n                  Cancel Order\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-center\">No orders found.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserOrders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}